---
title: 5.1 CPU 的功能和基本结构
date: 2019-11-23
---

## 1. CPU 的功能

中央处理器（CPU）由运算器和控制器组成。其中，控制器的功能是负责协调并控制计算机各部件执行程序的指令序列，包括取指令、分析指令和执行指令；运算器的功能是对数据进行加工。CPU 的具体功能包括：

1. 指令控制。完成取指令、分析指令和执行指令的操作，即程序的顺序控制。（分析情况）
2. 操作控制。一条指令的功能往往由若干操作信号的组合来实现。CPU 管理并产生由内存取出的每条指令的操作信号，把各种操作信号送往相应的部件，从而控制这些部件按指令的要求进行动作。（发出命令）
3. 时间控制。对各种操作加以时间上的控制。时间控制要为每条指令按时间顺序提供应有的控制符号。（先后部署）
4. 数据加工。对数据进行算术和逻辑运算。（单点爆破）
5. 中断处理。对计算机运行过程中出现的异常情况和特殊请求进行处理。（战败止损）

## 2. CPU 的基本结构

在计算机系统中，中央处理器主要由运算器和控制器两大部分组成。

运算器包括算术逻辑单元、暂存寄存器、累加寄存器、通用寄存器组、程序状态寄存器等等。

控制器包括程序计数器、指令寄存器、指令译码器、存储器地址寄存器、存储器数据寄存器等等。

### 2.1 运算器

运算器接收从控制器送来的命令并执行相应的动作，对数据进行加工和处理。运算器是计算机对数据进行加工处理的中心，它主要由算术逻辑单元（ALU）、暂存寄存器、累加寄存器（ACC）、通用寄存器组、程序状态字寄存器（PSW）、移位器、计数器（CT）等组成。

1. 算术逻辑单元。主要功能是进行算术/逻辑运算。
2. 暂存寄存器。用于**暂存从主存读来的数据**，该数据不能存放在通用寄存器中，否则会破坏其原有内容。暂存寄存器堆应用程序员是透明的。
3. 累加寄存器。它是一个通用寄存器，用于暂时存放 ALU 运算的结果信息，可以作为加法运算的一个输入端。
4. 通用寄存器组。如 AX、BX、CX、DX、SP 等。用于存放操作数（包括源操作数、目的操作数和中间结果）和各种地址信息等。SP 是堆栈指针，用于指示栈顶的地址。
5. 程序状态字寄存器。保留**由算术逻辑运算指令或测试指令的结果而建立的各种状态信息**，如溢出标志（OF）、符号标志（SF）、零标志（ZF）、进位标志（CF）等。PSW 中的这些位参与并决定微操作的形成。
6. 移位器。对操作数或运算结果进行移位运算。
7. 计数器。控制乘除运算的操作步数。

### 2.2 控制器

控制器是整个系统的指挥中枢，在控制器的控制下，使运算器、存储器和输入/输出设备等功能部件构成一个有机的整体，根据指令的要求指挥全机协调工作。控制器的基本功能是**执行指令**，每条指令的执行是由控制器发出的一组微操作实现的。

控制器有硬布线控制器和微程序控制器两种类型（见 5.4 节）。

控制器由程序计数器（PC）、指令寄存器（IR）、指令译码器、存储器地址寄存器（MAR）、存储器数据寄存器（MDR）、**时序系统**和**微操作信号发生器**等组成。

1. 程序计数器。用于指出下一条指令在主存中的存放地址。CPU 根据 PC 的内容取主存中取指令。因程序中指令（通常）是顺序执行的，所以 PC 有自增功能。
2. 指令寄存器。用于保存当前正在执行的那条指令。
3. 指令译码器。**仅对操作码字段进行译码**，向控制器提供特定的操作信号。
4. 存储器地址寄存器（MAR）。用于存放向主存写入的信息或从主存中读出的信息。
5. 存储器数据寄存器（MDR）。用于存放向主存写入的信息或从主存中读出的信息。
6. 时序系统。用于产生各种时序信号，它们都由统一时钟（CLOCK）分频得到。
7. 微操作信号发生器。根据 IR 的内容（指令）、PSW 的内容（状态信息）及时序信号，产生控制整个计算机系统所需的各种控制信号，其结构有组合逻辑型和存储逻辑型两种。

控制器的工作原理是，根据指令操作码、指令的执行步骤（微命令序列）和条件信号来形成当前计算机各部件要用到的控制信号。计算机整机各硬件系统在这些控制信号的控制下协同运行，产生预期的执行结果。

注意：CPU 内部寄存器大致可分为两类：一类是用户可见的寄存器，可对这类寄存器编程，如**通用寄存器组**、**程序状态字寄存器**；另一类是用户不可见的寄存器，对用户是透明的，不可对这类寄存器编程，如**存储器地址寄存器**，**存储器数据寄存器**、**指令寄存器**。

## 3. 习题

1. 通用寄存器的位数取决于？
2. 通用寄存器的功能？
3. 控制器的全部功能？
4. 间址周期的作用？
5. 程序计数器（PC）和指令寄存器（IR）的位数取决于什么？
6. -1 减 -2 后，进位/借位标志 CF 和溢出表示 OF 分别是啥
7. CPU 有哪些专用寄存器

## 4. 习题答案

1. 机器字长
2. 存放数据和地址
3. 从主存中取出指令、分析指令并产生有关的操作控制信号
4. 间址周期的作用是取操作数的有效地址。
5. PC 是指向指令的首地址的，所以 PC 的位数取决于指令的个数范围。指令寄存器是存指令的，取决于指令的宽度。例如 32 位字长指令字格式的 IR 寄存器是 32 位的，若主存空间为 4GB，那么程序寄存器的表示范围就是 4GB/4B = 1G，也就是 30 位。
6. 0 和 0，不借位，不溢出。
7. 程序计数器（PC）、指令寄存器（IR）、存储器数据寄存器（MDR）、存储器地址寄存器（MAR）和程序状态字寄存器（PSW）。




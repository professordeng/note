---
title: 6.3 总线操作和定时
date: 2019-12-01
---

总线定时是指总线在双方交换数据的过程中**需要时间上配合**关系的控制，这种控制称为总线定时，其实质是一种**协议或规则**，主要有**同步**和**异步**两种基本定时方式。

## 1. 总线传输的 4 个阶段

一个总线周期通常可分为以下 4 个阶段：

1. 申请分配阶段。由需要使用总线的主模块（或主设备）提出申请，经**总线仲裁机构**决定将下一传输周期的总线使用权授予某一申请者。也可将此阶段细分为**传输请求**和**总线仲裁**两个阶段。
2. 寻址阶段。取得使用权的主模块通过总线发出本次要访问的从模块（或从设备）的地址及有关命令，启动参与本次传输的从模块。
3. 传输阶段。主模块和从模块进行数据交换，可单向或双向进行数据传送。
4. 结束阶段。主模块的有关信息均从系统总线上撤除，让出总线使用区。

## 2. 同步定时方式

所谓同步定时方式，是指系统采用一个统一的时钟信号来协调发送和接收双方的传送定时关系。时钟产生相等的时间间隔，**每个间隔构成一个总线周期**。在一个总线周期中，发送方和接收方可以进行一次数据传送。因为采用统一的时钟，每个部件或设备发送或接收信息都在固定的总线传送周期中，一个总线的传送周期结東，下一个总线的传送周期开始。

优点：传送速度快，具有较高的传输速率；总线控制逻辑简单。

缺点：主从设备属于强制性同步；不能及时进行数据通信的有效性检验，可靠性较差。

同步通信适用于总线长度较短及总线所接部件的存取时间比较接近的系统。

## 3. 异步定时方式

在异步定时方式中，没有统一的时钟，也没有固定的时间间隔，完全依靠传送双方相互制约的 “握手” 信号来实现定时控制。通常，把交换信息的两个部件或设备分为主设备和从设备，主设备提出交换信息的 “请求” 信号，经接口传送到从设备；从设备接到主设备的请求后，通过接口向主设备发出 “回答” 信号。

优点：总线周期长度可变，能保证两个工作速度相差很大的部件或设备之间可靠地进行信息交换，自动适应时间的配合。

缺点：比同步控制方式稍复杂一些，速度比同步定时方式慢。

根据 “请求” 和 “回答” 信号的撤销是否互锁，异步定时方式又分为以下 3 种类型。（P257）

1. 不互锁方式。主设备发出 “请求” 信号后，不必等到接到从设备的 “回答” 信号，而是经过一段时间便撤销 “请求” 信号。而从设备在接到 “请求” 信号后，发出 “回答” 信号，并经过一段时间后自动撤销 “回答” 信号。双方不存在互锁关系。
2. 半互锁方式。主设备发出 “请求” 信号后，必须在接到从设备的 “回答” 信号后，オ撤销 “请求” 信号，有互锁的关系。而从设备在接到 “请求” 信号后，发出 “回答” 信号，但不必等待获知主设备的 “请求” 信号已经撤销，而是隔一段时间后自动撤销 “回答” 信号，不存在互锁关系。
3. 全互方式。主设备发出 “请求” 信号后，必须在从设备 “回答” 后才撤销 “请求” 信号；从设备发出 “回答” 信号后，必须在获知主设备 “请求” 信号已撤销后，再撤销其 “回答” 信号。双方存在互锁关系。

## 4. 习题

1. 异步总线中，传送操作
2. 总线的异步通信方式特点

## 5. 习题答案

1. 按需分配时间
2. 完全依靠传送双方相互制约的 “握手” 信号来实现定时控制。
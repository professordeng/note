---
title: 3.3 半导体随机存储器
date: 2019-11-13
---

## 1. 半导体存储芯片

### 1.1 半导体存储芯片的基本结构

半导体存储芯片内集成有存储矩阵（存储体）、译码驱动电路和读写电路等，其基本结构如下

1. 存储矩阵 ：由大量相同的位存储单元阵列构成。
2. 译码驱动 ：将来自地址总线的地址信号翻译成对应存储单元的选通信号，该信号在读写电路的配合下完成对被选中单元的读/写操作。
3. 读写电路：包括读出放大器和写入电路，用来完成读/写操作。
4. 读/写控制线：决定芯片进行读/写操作。
5. 片选线：确定哪个存储芯片被选中。
6. 地址线：是单向输入的，其位数与存储字的个数有关。
7. 数据线是双向的，其位数与读出或写入的数据位数有关，数据线数和地址线数共同反映存储芯片容量的大小。如地址线为 10 根，数据线为 8 根，则芯片容量 = 2¹⁰×8=8K 位。

半导体随机存取存储器按其存储信息的原理不同，可分为静态 RAM 和动态 RAM 两种。高速缓冲存储器大多由静态 RAM 实现，动态 RAM 则广泛应用于计算机的主存。

### 1.2 74138 译码器

译码是编码的逆过程，实现译码功能的电路称为译码器。74138 译码器输入是 3 位二进制码，8 个输出端对应 8 种输入状态，因此又称 3/8 译码器。（P96）

## 2. SRAM 和 DRAM

### 2.1 SRAM 的工作原理

通常把存放一个二进制位的物理器件称为存储元，它是存储器的最基本的构件。地址码相同的多个存储元构成一个存储单元。若干存储单元的集合构成存储体。

静态随机存储器（SRAM）的存储元是用双稳态触发器（六管 MOS）来记忆信息的，因此即使信息被读出后，它仍保持其原状态而不需要再生（非破坏性读出）。但是，只要电源被切断，原来的保存信息便会丢失，故它属于易失性半导体存储器。

SRAM 的存取速度快，但集成度低，功耗较大，所以一般用来组成高速缓冲存储器。

### 2.2 DRAM 的工作原理

与 SRAM 的存储原理不同，动态随机存储器（DRAM）是利用存储元电路中栅极电容上的电荷来存储信息的，常见的 DRAM 的基本存储电路通常分为三管式和单管式。DRAM 采用地址复用技术，地址线是原来的 1/2，且地址信号分行、列两次传送。

相对于 SRAM 来说，DRAM 具有容易集成、位价低、容量大和功耗低等优点，但 DRAM 的存取速度比 SRAM 的慢，一般用来组成大容量主存系统。

DRAM 电容上的电荷一般只能维持 `1~2 ms`，因此即使电源不掉电，信息也会自动消失。为此，每隔一定时间必须刷新，通常取 `2 ms` ，这个时间称为刷新周期。常用的刷新方法有 3 种：集中刷新、分散刷新和异步刷新。

1. 集中刷新：指在一个刷新周期内，利用一段固定的时间，依次对存储器的所有行进行逐一再生，在此期间停止对存储器的读写操作，称为 “死时间”，又称访存 “死区”。

   集中刷新的优点是读写操作时不受刷新工作的影响，因此系统的存取速度较高；缺点是在集中刷新期间（死区）不能访问存储器。

2. 分散刷新：把对每行的刷新分散到各个工作周期中。这样，一个存储器的系统工作周期分为两部分：前半部分用于正常读、写或保持；后半部分用于刷新某一行。这种刷新方式增加了系统的存取周期，如存储芯片的存取周期为 `0.5μs` ，则系统的存取周期为 `1μs` 。分散刷新的优点是没有死区；缺点是加长了系统的存取周期，降低了整机的速度。

3. 异步刷新：异步刷新是前两种方法的结合，它既可以缩短 “死时间”，又能充分利用最大刷新间隔为 `2ms` 的特点。具体做法是将刷新周期除以行数，得到两次刷新操作之间的时间间隔 t，利用逻辑电路每隔时间 t 产生依次刷新请求。这样可以避免使 CPU 连续等待过长的时间，而且减少了刷新次数，从根本上提高了整机的工作效率。

若将刷新安排在不需要访问存储器的译码阶段，则既不会加长存取周期，又不会产生 “死时间”，这是分散刷新方式的发展，也成为 “透明刷新”。

DRAM 的刷新需注意以下问题：

1. 刷新对 CPU 是透明的，即刷新不依赖于外部的访问
2. 动态 RAM 的刷新单位是行，故刷新操作时仅需要行地址
3. 刷新操作类似于读操作，但又有所不同。刷新操作仅给栅极电容补充电荷，不需要信息输出。另外，刷新时不需要选片，即整个存储器中的所有芯片同时被刷新。

读者需要理解易失性存储器和刷新的区别，易失性存储器是指断电后数据丢失，SRAM 和 DRAM 都满足断电内容消失，但需要刷新的只有 DRAM，而 SRAM 不需要刷新。

### 2.3 存储器的读、写周期

1. RAM 的读周期（P97）

   从给出有效地址开始，到读出所选中单元的内容并在外部数据总线上稳定地出现所需的时间，称为读出时间（`tA`）。地址片选信号 `CS` 必须保持到数据稳定输出，`tCO` 为片选的保持时间，在读周期中 `WE` 为高电平。

   读周期与读出时间是两个不同的概念，读周期时间表示存储芯片进行两次连续读操作时所必须间隔的时间，它总是大于等于读出时间。

2. RAM 的写周期（P97）

   要实现写操作，要求片选信号 `CS` 和写命令信号 `WE` 必须都为低电平。为使数据总线上的信息能够可靠地写入存储器，要求 `CS` 信号与 `WE` 信号相 "与" 的宽度至少为 `tW` 。

   为了保证在地址变化期间不会发生错误写入而破坏存储器的内容，`WE` 信号在地址变化期间必须为高电平。为了保证有效数据的可靠写入，地址有效的时间至少应为 `tWC=tW+tWR` 。为了保证在 `WE` 和 `CS` 变为无效前能把数据可靠地写入，要求写入的数据必须在 `tDC` 以前在数据总线上已经稳定。

### 2.4 SRAM 和 DRAM 的比较

|                | SRAM     | DRAM     |
| -------------- | -------- | -------- |
| 存储信息       | 触发器   | 电容     |
| 破坏性读出     | 非       | 是       |
| 需要刷新       | 不要     | 需要     |
| 送行列地址     | 同时送   | 分两次送 |
| 运行速度       | 快       | 慢       |
| 集成度         | 低       | 高       |
| 发热量（功耗） | 大       | 小       |
| 存储成本       | 高       | 低       |
| 主要用途       | 高速缓存 | 主机内存 |

## 3. 只读存储器

### 3.1 只读存储器（ROM）的特点

ROM 和 RAM 都是支持随机存取的存储器，其中 SRAM 和 DRAM 均为易失性存储器。而 ROM 中一旦有了信息，就不能轻易改变，即使掉电也不会丢失，它在计算机系统中是只供读出的存储器。ROM 器件有两个显著的优点

1. 结构简单，所以位密度比可读写存储器的高。
2. 具有非易失性，所以可靠性高。

### 3.2 ROM 的类型

根据制造工艺的不同，ROM 可分为掩膜式只读存储器（MROM）、一次可编程只读存储器（PRAM）、可擦除可编程只读存储器（EPROM）、闪速存储器（Flash Memory）和固态硬盘（Solid State Drivers）。

1. 掩膜式只读存储器

   MROM 的内容由半导体制造厂按用户提出的要求在芯片的生产过程中直接写入，写入以后任何人都无法改变其内容。优点是可靠性高，集成度高，价格便宜；缺点是灵活性差。

2. 一次可编程只读存储器

   PROM 是可以实现一次性编程的可读存储器。允许用户利用专门的设备（编程器）写入自己的程序，一旦写入，内容就无法改变。

3. 可擦除可编程只读存储器

   EPROM 不仅可以由用户利用编程器写入信息，而且可以对其内容进行多次改写。需要修改 EPROM 的内容时，先将其全部内容擦除，然后编程。EPROM 又可分为两种，即紫外线擦除（UVEPROM）和电擦除（E²PROM）。EPROM 虽然即可读又可写，但它不能取代 RAM，因为 EPROM 的编程次数有限，且写入时间过长。

4. 闪速存储器（Flash Memory）

   Flash Memory 是在 EPROM 与 E²PROM 的基础上发展起来的，其主要特点是即可在不加电的情况下长期保存信息，又能在线进行快速擦除与重写。闪速存储器既有 EPROM 的价格便宜、集成度高的优点，又有 E²PROM 电可擦除重写的特点，且擦除重写的速度快。

5. 固态硬盘（Solid State Drives，SSD）

   基于闪存的固态硬盘是用固态电子存储片阵列制成的硬盘，由控制单元和存储单元（FLASH 芯片）组成。保留了 Flash Memory 长期保存信息、快速擦除与重写的特点。对比传统硬盘也具有读写速度快、低功耗的特性，缺点是价格较高。

## 4. 习题

1. 芯片的引脚是啥？
2. 1024×8 的 SRAM 芯片的引脚数的最小数目？（除电源和接地端外） 
3. 动态 RAM 刷新方式有哪些，不存在死时间的是？
4. DRAM 的地址复用如何理解？
5. 1024×8 的 DRAM 芯片的引脚数的最小数目？（采用地址复用技术。除电源和接地端外） 
6. 容量为 256MB 的存储器由若干 4M×8 位的 DRAM 芯片构成，该 DRAM 芯片的地址引脚和数据引脚总数为？
7. 闪存特点
8. U 盘属于什么类型的存储器。
9. 随机存取与随机存储器的区别？
10. EPROM 可读可写，可作为随机存取器吗？
11. SDRAM 是啥
12. 动态半导体存储器特点
13. 提高刷新存储器带宽的技术措施？
14. DRAM 最大刷新间隔；64×64 的芯片利用异步刷新的周期是多少
15. 死时间率

## 4. 习题答案

1. 引脚就是接线的地方，每条线可以传送 0 或 1 的信号。
2. 1024=2¹⁰，需要 10 根地址线，一个单元 8 位需要 8 根数据线，一个芯片需要一个片选线，一个芯片还需要一个读/写控制线。10+8+1+2=21 条
3. 集中刷新，分散属性和异步刷新，其中分散刷新不存在死时间，但存取周期变长。异步刷新虽然缩短了死时间，但死时间依然存在。
4. DRAM 取存储矩阵中的单元分行和列两次进行，所以第一次和第二次用的地址线都是一样的，这叫复用，所以地址线就比 SRAM 少了一半。
5. 1024=2¹⁰，采用地址复用技术时，通过行通选和列通选分行、列两次传送地址信号，故地址线减半为 5 根，数据线仍为 8 根；加上行通选和列通选即读写控制线（片选线用行通选代替）4 根，共 17 根。
6. 主语是 DRAM 芯片，好办，4M=2²²，DRAM 地址线复用，22/2=11，8 位需要 8 根数据线，11+8=19
7. Flash Memory ：MOS 管的浮删上有无电荷来存储信息；ROM 的一种，写入时必须线擦除原有数据，所以写比读慢（硬件常识）。非易失性，随机访问。现有 SSD 固态硬盘，由 Flash 芯片组成。
8. U 盘采用 Flash Memory 技术。
9. 随机存取是随机存储器（RAM）的特点，但是只读存储器（ROM）也是随机存取的。
10. 不能，改写烦琐，速度慢（相较于传统 RAM）
11. 同步动态随机存储器，DRAM 的一种。
12. 工作时内容不会发生变化；每个一段时间需要重新写入（读出、放大、写入），完整的刷新也就只需要一个存取周期（读大写）
13. 高速 DRAM、多体交叉存储、总线带宽加倍、双端口存储器
14. 2ms；按行刷新，2ms/64=31.25 μs，向下取整得31 μs
15. 死时间率=死时间/2ms
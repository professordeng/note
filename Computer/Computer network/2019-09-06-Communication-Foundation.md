---
title: 2.1 通信基础
date: 2019-11-3
---

## 1. 基本概念

### 1.1 数据、信号与码元

**数据**是指传送信息的实体。**信号**是指数据的电气或电磁表现，是数据在传输过程中的存在形式。数据和信号都可用 “模拟的” 或 “数字的” 来修饰：

1. 连续变化的数据（或信号）称为模拟数据（或模拟信号）
2. 取值仅允许为有限的几个离散数值的数据（或信号）称为数字数据（或数字信号）。

数据传输方式可分为串行传输和并行传输。串行传输是指一个一个的比特按照时间顺序传输（出于经济上的考虑，远距离通信通常采用串行传输），并行传输是指多个比特通过多条通信信道同时传输。

**码元**是指用一个固定时长的信号波形（数字脉冲）表示一位 k 进制数字，代表不同离散数值的基本波形，是数字通信中数字信号的计量单位，这个时长内的信号称为 k 进制码元，而该时长称为码元宽度。1 码元可以携带多个比特的信息量。例如，在使用二进制编码时，只有两种不同的码元：一种表示 0 状态，另一种表示 1 状态。

### 1.2 信源、信道与信宿

数据通信是指数字计算机或其他数字终端之间的通信。一个数据通信系统主要划分为信源、信道和信宿三部分。

**信源**是产生和发送数据的源头。**信宿**是接受数据的终点，它们通常都是计算机或其他数字终端装置。发送端信源发出的信息需要通过变换器转换成适合于在信道上传输的信号，而通过信道传输到接收端的信号先由反变换器转换成原始信息，再发送给信宿。

**信道与电路并不等同**，信道是信号的传输媒介。一个信道可视为一条线路的逻辑部件，一般用来表示向某个方向传送信息的介质，因此一条通信线路往往包含一条发送信道和一条接受信道。噪音源是信道上的噪音（即对信号的干扰）及分散在通信系统其他各处的噪声的集中表示。

信道按传输信号形式的不同可分为传送模拟信号的**模拟信道**和传送数字信号的**数字信道**两大类；信道按传输介质的不同可分为**无线信道**和**有线信道**。

信道上传送的信号由**基带信号**和**宽带信号**之分。基带信号将数字信号 1 和 0 直接用两种不同的电压表示，然后送到数字信道上传输（称为基带传输）；宽带信号将基带信号进行调制后形成频分复用模拟信号，然后传送到模拟信道上传输（称为宽带传输）

从通信双方信息的交互方式看，可分为三种基本方式：

1. 单工通信。只有一个方向的通信而没有反方向的交互，仅需要一条信道。例如，无线电广播、电视广播就属于这种类型。
2. 半双工通道。通信的双方都可以发送或接收信息，但任何一方都不能同时发送和接收信息，此时需要两条信道。
3. 全双工通信。通信的双方都可以发送或接收信息，也需要两条信道。

信道的极限容量是指信道的最高码元传输速率或信道的极限信息传输速率。

### 1.3 速率、波特与带宽

**速率**也称数据率，指的是数据的传输速率，表示单位时间内传输的数字量。可以用码元传输速率和信息传输速率表示。

1. 码元传输速率。又称码元速率、波形速率等，它表示单位时间内数字通信系统所传输的**码元个数**（也可称为脉冲个数或信号变化的次数），单位是波特（Baud）。1 波特表示数字通信系统每秒传输一个码元。这里的码元可以是多进制的，也可以是二进制的，但码元速率与进制数无关。
2. 信息传输速率。又称信息速率、比特率等。它表示单位时间内数字通信系统传输的**二进制码元个数**（即比特数），单位是比特/秒（b/s）

注意：**波特和比特是两个不同的概念**，码元传输速率也称调制速率、波形速率或符号速率。但码元传输速率与信息传输速率在数量上却又有一定的关系。若一个码元携带 n 比特的信息量（例如码元是 7，那么 111 就含有有 3 个比特），则 M 波特率的码元传输速率所对应的信息传输速率为 Mn 比特/秒。

带宽原指信号具有的频带宽度，单位是赫兹（Hz）。在实际网络中，由于数据率是信道最重要的指标之一，而宽带与数据率存在数值上的互换关系，因此常用来表示网络的通信线路所能传输数据的能力。因此，带宽表示单位时间内从网络中的某一点到另一点所能通过的 “最高数据率” 。显然，此时宽带的单位不再是 Hz，而是 b/s。

## 2. 奈奎斯特定理与香农定理

### 2.1 奈奎斯特定理

奈奎斯特（Nyquist）定理又称奈氏准则，它指出在理想低通（没有噪音、带宽有限）的信道中，极限码元传输率为 2W 波特，其中 **W 是理想低通信道的带宽**，单位为 Hz。若**用 V 表示每个码元离散电平的数目**（码元的离散电平数目是指有多少种不同的码元，比如有 16 种不同的码元，则需要 4 位二进制位，因此数据传输率是码元传输率的 4 倍），则极限数据率为

理想低通信道下的极限数据传输率 = 2W·log₂V（单位为 b/s）

对于奈氏准则，可以得出以下结论

1. 在任何信道中，码元传输的速率是有上限的。若传输速率超过此上限，就会出现严重的码间串扰问题（指在接收端收到的信号波形失去了码元之间的清晰界限），使得接收端不可能完全正确识别码元。
2. 信道的频带越宽（即通过的信号高频分量越多），就可用更高的速率进行码元的有效传输。
3. 奈氏准则给出了码元传输速率的限制，但并未对信息传输速率给出限制，即未对一个码元可以对应多少个二进制位给出限制。

由于码元的传输速率受奈氏准则的制约，所以要提高数据的传输速率，就必须设法使每个码元携带更多个比特的信息量，此时就需要采用多元制的调制方法。

### 2.2 香农定理

香农（Shannon）定理给出了带宽受限且有高斯噪声干扰的信道的极限数据传输率，当用此速率进行传输时，可以做到不产生误差。香农定理定义为

信道的极限数据传输率 = **W·log₂(1+S/N)**（单位为 b/s）

式中，**W 为信道的带宽，S 为信道所传输信号的平均功率，N 为信道内部的高斯噪声功率**。S/N 为信噪比，即信号的平均功率与噪声的平均功率之比，信噪比 = 10·lg(S/N)​（单位为 dB），例如当 S/N=10 时，信噪比为 10dB，而当 S/N=1000 时，信噪比为 30 dB 。

对于香农定理，可以得到以下结论：

1. 信道的带宽或信道的信噪比越大，信息的极限传输速率越高。
2. 对一定的传输带宽和一定的信噪比，信息传输速率的上限是确定的。
3. 只要信息的传输速率低于信道的极限传输速率，就能找到某种方法来实现无差错的传输。
4. 香农定理得出的是极限信息传输速率，实际信道能达到的传输速率要比它低不少。

从香农定理可以看出，若信道带宽 W 或信噪比 S/N 没有上限（实际信道当然不可能这样），则信道的极限信息传输速率也没有上限。

奈氏准则只考虑了带宽与极限码元传输速率的关系，而香农定理不仅考虑到了带宽，也考虑到了信噪比。这从另一个侧面表明，一个码元对应的二进制位数是有限的。

## 3. 编码与调制

数据无论是数字的还是模拟的，为了传输的目的都必须转变成信号。把数据变换为模拟信号的过程称为**调制**，把数据变换为数字信号的过程称为**编码**。

**信号是数据的具体表现形式**，它和数据有一定的关系，但又和数据不同。数字数据可以通过数字发送器转换为数字信号传输，也可以通过调制器转换为模拟信号传输；同样，模拟数据可以通过 PCM 编码器转换为数字信号传输，也可以通过放大器转换为模拟信号传输。这样，就形成了下列 4 种编码方式。

### 3.1 数字数据编码为数字信号

**数字数据编码用于基带传输中**，即在基本不改变数字数据信号频率的情况下，直接传输数字信号，对于这种编码方式，具体用什么样的数字信号表示 0 或 1 就是所谓的编码。编码的规则有多种，只要能有效地把 1 和 0 区分开即可，常用的编码方式有以下几种

1. 非归零编码

   非归零编码（NRZ）用两个电压来表示两个二进制数字，如用低电压表示 0，用高电压表示 1；或者相反。这种编码虽然容易实现，但没有检错功能，而且也无法判断一个码元的开始和结束，以至于收发双方难以保持同步。

2. 曼切斯特编码

   曼切斯特编码（Manchester Encoding）将一个码元分成两个相等的间隔，**前一个间隔为高电平而后一个间隔为低电平表示码元 1；码元 0 的表示方法正好相反**。当然，也可采用相反的规定。该编码的特点是，在每个码元的中间出现电平跳变，**位中间的跳变既作为时钟信号**（可用于同步），又作为数据信号，**但它所占的频带宽度是原始基带宽度的两倍**。以太网使用的编码方式就是曼切斯特编码。

3. 差分曼切斯特编码

   差分曼切斯特编码常用于局域网传输，其规则是：若码元为 1，则前半个码元的电平与上一个码元的后半个码元的电平相同；若码元为 0，则情形相反。该编码的特点是，在每个码元的中间都有一次电平的跳转，可以实现自同步，且抗干扰性较好。

4. 4B/5B 编码

   将欲发送数据流的每 4 位作为一组，然后按照 4B/5B 编码规则将其转换成相应的 5 位码。5 位码共 32 种组合，但只采用其中的 16 种对于 16 种不同的 4 位码，其他的 16 种作为控制码（帧的开始和结束、线路的状态信息等）或保留。

### 3.2 数字数据调制为模拟信号

数字数据调制技术在发送端将数字信号转换为模拟信号，而在接收端将模拟信号还原为数字信号，分别对应于调制解调器的调制和解调的过程。基本的调制方法有如下几种：

1. 幅移键控（ASK）。通过改变载波信号的振幅来表示数字 1 和 0，而载波的频率和相位都不改变。比较容易实现，但抗干扰能力差。

2. 频移键控（FSK）。通过改变载波信号的频率来表示数字 1 和 0，而载波的振幅和相位都不改变。容易实现，抗干扰能力强，目前应用较为广泛。

3. 相移键控（PSK）。通过改变载波信号的相位来表示数字 1 和 0，而载波的振幅和频率都不改变。它又分为绝对调相和相对调相。

4. 正交振幅调制（QAM）。在频率相同的前提下，将 ASK 和 PSK 结合起来，形成叠加信号。设波特率为 B，采用 m 个相位，每个相位有 n 钟振幅，则该 QAM 技术的数据传输率 R 为

   R=B·log₂(mn)​（单位为 b/s）

2ASK 中用载波有幅度和无幅度分别表示数字数据的 “1” 和 “0” ；2FSK 中用两种不同的频率分别表示数字数据 “1” 和 “0”；2PSK 中用相位 0 和相位 Π 分别表示数据的 “1” 和 “0” ，是一种绝对调相方式。

### 3.3 模拟数据编码为数字信号

这种编码方式最典型的例子是常用于对音频信号进行编码的脉码调制（PCM）。它主要包括三个步骤，及采样、量化和编码。

先来介绍采样定理：**在通信领域，带宽是指信号最高频率于最低频率之差**，单位为 Hz。因此，将模拟信号转换成数字信号时，假设原始信号中的最大频率为 f，那么采样频率必须大于等于最大频率 f 的两倍，才能保证采样后的数字信号完整保留原始模拟信号的信息（只需记住结论）。另外，采样定理又称奈奎斯特定理。

1. 采样是指对模拟信号进行周期性扫描，把时间上连续的信号变成时间上离散的信号。根据采样定理，当采样的频率大于等于模拟数据的频带带宽（最高变化频率）的两倍时，所得的离散信号可以无失真地代表被采样的模拟数据。
2. 量化就是把采样取得的电平幅值按照一定的分级标度转化为对应的数字值并取整数，这样就把连续的电平幅值转换为了离散的数字量。采样和量化的实质就是分割和转换。
3. 编码是把量化的结果转换为与之对应的二进制编码。

### 3.4 模拟数据调制为模拟信号

为了实现传输的有效性，可能需要较高的频率。这种调制方式还可以使用频分复用（FDM）技术，充分利用带宽资源。电话机和本地局交换机采用模拟信号传输模拟数据的编码方式；模拟的声音数据是加载到模拟的载波信号中传输的。

## 4. 电路交换、报文交换与分组交换

### 4.1 电路交换

在进行数据传输前，两个结点之间必须先建立一条专用（双方独占）的物理通信路径（由通信双方之间的交换设备和链路逐段连接而成），该路径可能经过许多中间结点。这一路径在整个数据传输期间一直被独占，直到通信结束后才被释放。因此，电路交换技术分为三个阶段：连接建立、数据传输和连接释放。

从通信资源的分配角度来看，“交换” 就是按照某种方式动态地分配传输线路的资源。电路交换的关键点是，在数据传输的过程中，用户始终占有端对端的固定传输带宽。

电路交换的优点如下：

1. 通信时延小。由于通信线路为通信双方专用，数据直达，因此传输数据的时延非常小。当传输的数据量较大时，这一优点非常明显。
2. 有序传输。双方通信时按发送顺序传输数据，不存在失序问题。
3. 没有冲突。不同的通信双方拥有不同的信道，不会出现争用物理信道的问题。
4. 适用范围广。电路交换既适用于传输模拟信号，又适用于传输数字信号。
5. 实用性强。通信双方之间的物理通路一旦建立，双方就可以随时通信。
6. 控制简单。电路交换的交换设备（交换机等）及控制均较简单。

电路交换技术的缺点如下：

1. 建立连接时间长。电路交换的平均连接建立时间对计算机通信来说太长。
2. 线路独占，使用效率低。电路交换连接建立后，物理通路被通信双方独占，即使通信线路空闲，也不能供其他用户使用，因而信道利用率低。
3. 灵活性差。只要在通信双方建立的通路中的任何一点出了故障，就必须重新拨号建立新的连接，这对十分紧急和重要的通信是很不利的。
4. 难以规格化。电路交换时，数据直达，不同类型、不同规格、不同速率的终端很难相互进行通信，也难以在通信过程中进行差错控制。

注意，电路建立后，除源结点和目的结点外，电路上的任何结点都采用 “直通方式” 接收数据和发送数据，即不会存在存储转发所耗费的时间。

### 4.2 报文交换

数据交换的单位是报文，报文携带有目标地址、源地址等信息。报文交换在交换结点采用的是存储转发的传输方式。

报文交换技术的优点如下：

1. 无须建立连接。报文交换不需要为通信双方预先建立一条专用的通信线路，不存在建立连接时延，用户可以随时发送报文。
2. 动态分配线路。当发送方把报文交给交换设备时，交换设备先存储整个报文，然后选择一条合适的空闲线路，将报文发送出去。
3. 提高线路可靠性。如果某条传输路径发生故障，那么可重新选择另一条路径传输数据，因此提高了传输的可靠性。
4. 提高线路利用率。通信双方不是固定占有一条通信线路，而是在不同的时间一段一端地部分占有这条物理通道，因而大大提高了通信线路的利用率。
5. 提供多目标服务。一个报文可以同时发送给多个目的地址，这在电路交换中是很难实现的。

报文交换技术的缺点如下：

1. 由于数据进入交换结点后要经历存储、转发这一过程，因此会引起转发时延（包括接收报文、检验正确性、排队、发送时间等）。
2. 报文交换对报文的大小没有限制，这就要求网络结点需要有较大的缓存空间。

注意：报文交换主要使用在早期的电报通信网中，现在很少使用，通常被较先进的分组交换方式所取代。

### 4.3 分组交换

同报文交换一样，分组交换也采用存储转发方式，但解决了报文交换中大报文传输的问题。分组交换限制了每次传送的数据块的大小的上限，把大的数据块划分为合理的小数据块，再加上些必要的控制信息（如源地址、目的地址和编号信息等），构成分组（Packet）。网络结点根据控制信息把分组送到下一结点，下一结点接收到分组后，暂时保存并排队等待传输，然后根据分组控制信息选择它的下一个结点，直到到达目的结点。

分组交换的优点如下：

1. 无建立时延。不需要为通信双方预先建立一条专用的通信线路，不存在连接建立时延，用户可随时发送分组。
2. 线路利用率高。通信双方不是固定占有一条通信线路，而是在不同的时间一段一段地部分占有这条物理通路，因而大大提高了通信线路的利用率。
3. 简化了存储管理（相对于报文交换）。因为分组的长度固定，相应的缓冲区的大小也固定，在交换结点中存储器的管理通常被简化为对缓冲区的管理，相对比较容易。
4. 加速传输。分组是逐个传输的，可以使后一个分组的存储操作与前一个分组的转发并行，这种流水线方式减少了报文的传输时间。此外，传输一个分组所需的缓冲区比传输一次报文所需的缓冲区要小得多，这样缓冲区不足而等待发送的概率及时间也必然少得多。
5. 减少了出错概率和重发数据量。因为分组较短，其出错概率必然减小，所以每次重发的数据量也就大大减少，这样不仅提高了可靠性，也减少了传输时延。

分组交换的缺点如下：

1. 存在传输时延。尽管分组交换比报文交换的传输时延少，但相对于电路交换仍存在转发时延，而且其结点交换机必须具有更强的处理能力。
2. 需要传输额外的信息量。每个小数据块都要加上源地址、目的地址和分组编号等信息，从而构成分组，因此使得传送的信息量增大了 5% ~ 10%，一定程度上降低了通信效率，增加了处理时间，使控制复杂，时延增加。
3. 当分组交换采用数据报服务时，可能会出现失序、丢失或重复分组，分组到达目的结点时，要对分组按编号进行排序等工作，因此很麻烦。若采用虚电路服务，虽无失序问题，但有呼叫建立、数据传输和虚电路释放三个过程。

下面给出了三种数据交换方式的比较。要传送的数据量很大且其传送时间远大于呼叫时间时，采用电路交换较为合适。端到端的通路由多段链路组成时，采用分组交换传送数据较为合适。从提高整个网络的信道利用率上看，报文交换和分组交换优于电路交换，其中分组交换比报文交换的时延小，尤其适合于计算机之间的突发式数据通信。

## 5. 数据报与虚电路

分组交换根据其通信子网向端点系统提供的服务，还可进一步分为面向连接的虚电路方式和无连接的数据报方式。这两种方式都是由网络层提供。要注意数据报方式和虚电路方式是分组交换的两种方式。

### 5.1 数据报

作为通信子网用户的端系统发送一个报文时，在端系统中实现的高层协议先把报文拆成若干带有序号的数据单元，并在网络层加上地址等控制信息后形成数据报分组（即网络层 PDU）。中间结点存储分组很短一段时间，找到最佳的路由后，尽快转发每个分组。不同的分组可以走不同的路径，也可以按不同的顺序到达目的结点。

数据报服务具有如下特点：

1. 发送分组前不需要建立连接。发送方可随时发送分组，网络中的结点可随时接收分组。
2. 网络尽最大努力交付，传输不保证可靠性，所以可能丢失；为每个分组独立地选择路由，转发的路径可能不同，因而分组不一定按序到达目的结点。
3. 发送的分组中要包括发送端和接收端的完整地址，以便可以独立传输。
4. 分组在交换结点存储转发时，需要排队等候处理，这会带来一定的时延。通过交换结点的通信量较大或网络发生拥塞时，这种时延会大大增加，交换结点还可根据情况丢弃部分分组。
5. 网络具有冗余路径，当某一交换结点或一段链路出现故障时，可相应地更新转发表，寻找另一条路径转发分组，对故障的适应能力强。
6. 存储转发的延时一般较小，提高了网络的吞吐量。
7. 收发双方不独占某一链路,资源利用率较高。

### 5.2 虚电路

虚电路方式试图将数据报方式与电路交换方式结合起来，充分发挥两种方法的优点，以达到最佳的数据交换效果。在分组发送之前，要求在发送方和接收方建立一条逻辑上相连的虚电路，并且连接一旦建立，就固定了虚电路所对应的物理路径。与电路交换类似，整个通信过程分为三个阶段：虚电路建立、数据传输与虚电路释放。

在虚电路方式中，端系统每次建立虚电路时，选择一个未用过的虚电路号分配给该虚电路，以区别于本系统中的其他虚电路。在传送数据时，每个数据分组不仅要有分组号、校验和等控制信息，还要有它要通过的虚电路号，以区别于其他虚电路上的分组。在电路网络中的每个结点上都维持一张虚电路表，表中的每项记录了一个打开的虚电路的信息，包括在接收链路和发送链路上的虚电路号、前一结点和下一结点的标识。数据的传输是双向进行的，上述信息是在虚电路的建立过程中确定的。

虚电路服务具有如下特点

1. 虚电路通信链路的建立和拆除需要时间开销，对交互式应用和小量的短分组情况显得很浪费，但对长时间、频繁的数据交换效率较高。
2. 虚电路的路由选择体现在连接建立阶段，连接建立后，就确定了传输路径。
3. 虚电路提供了可靠的通信功能，能保证每个分组正确且有序到达。此外，还可以对两个数据端点的流量进行控制，当接收方来不及接收数据时，可以通知发送方暂缓发送。
4. 虚电路有一个致命的弱点，即当网络中的某个结点或某条链路出现故障而彻底失效时，所有经过该结点或该链路的虚电路将遭到破坏。
5. 分组首部并不包含目的地址，而包含虚电路标识符，相对数据报方式开销小。

虚电路之所以是 “虚” 的，是因为这条电路不是专用的，每个结点到其他结点之间的链路可能同时有若干虚电路通过，也可能同时与多个结点之间建立虚电路。每条虚电路支持特定的两个端系统之间的数据传输，两个端系统之间也可以有多条虚电路为不同的进程服务，这些虚电路的实际路由可能相同也可能不同。

注意：虚电路数据传输过程是有确认的传输（由高层实现）。网络中的传输是否有确认与网络层提供的两种服务没有任何关系。

数据报服务和虚电报服务的比较如下：

|                    | 数据报服务                                                   | 虚电路服务                                               |
| ------------------ | ------------------------------------------------------------ | -------------------------------------------------------- |
| 连接的建立         | 不需要                                                       | 必须有                                                   |
| 目的地址           | 每个分组都有完整的目的地址                                   | 仅在建立连接阶段使用，之后每个分组使用长度较短的虚电路号 |
| 路由选择           | 每个分组独立地进行路由选择和转发                             | 属于同一条虚电路的分组按照同一路由转发                   |
| 分组顺序           | 不保证分组的有序到达                                         | 保证分组的有序到达                                       |
| 可靠性             | 不保证可靠通信，可靠性由用户主机来保证                       | 可靠性由网络保证                                         |
| 对网络故障的适应性 | 出故障的结点丢失分组，其他分组路径选择发送变化时可以正常传输 | 所有经过故障结点的虚电路均不能正常工作                   |
| 差错处理和流量控制 | 由用户主机进行流量控制，不保证数据报的可靠性                 | 可由分组交换网负责，也可由用户主机负责                   |

## 6. 问题解疑

1. 波特率是每秒可能发生的信号变化次数（单位时间的脉冲信号次数），单位就是波特。
2. 曼切斯特编码中，每两次脉冲代表一个数据，所以此时波特率和数据率的比值是 2:1。
3. 比特率 = 波特率×log₂n，n 是脉冲信号个数。
4. 无噪音信道（奈奎斯特定理）：2Wlog₂V，这里的 V 表示（13）
5. 信噪比（香农定理）：W·log₂(1+S/N)，计算的时候取奈奎斯特和香农定理中较小的那个。（15）
6. S/N 和 dB 之间的转化，10dB=10lgS/N，可得 S/N=10（21）
7. 频分复用的每条支路要相等，所以取最大的。（22）
8. 深刻认识数据率，就是每秒钟传输的比特数。
9. 虚电路的容错能力没有数据报服务这么强，因为只要虚电路中某一环节出错，就挂了。
10. 计算时间的时候要注意转发时延。（37）
11. 分组交换极大地减小了传输时延（主要是转发时延）（38）
12. 信道传输率其实就是信道的发送速率，不要和传播速率混淆（39）
13. NRZI 是用电平的一次翻转表示 1，与前一个电平相同表示 0。（40）
14. 学会辨别曼切斯特（1 高 0 低）和差分曼切斯特编码（1 同 0 反）。


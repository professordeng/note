---
title: 3.5 介质访问控制
date: 2019-11-11
---

介质访问控制所要完成的主要任务是，**为使用介质的每个结点隔离来自同一信道上其他结点所传送的信号**，以协调活动结点的传输。**用来决定广播信道中信道分配的协议属于数据链路层的一个子层**，称为介质访问控制（Medium Access Control，MAC）子层。

结点 A、B、C、D、E 共享广播信道，假设 A 要与 C 发生通信，B 要与 D 发生通信，由于它们共用一条信道，如果不加控制，那么两对结点间的通信可能会因为互相干扰而失败。介质访问控制的内容是，采取一定的措施，使得两对结点之间的通信不会发生互相干扰的情况。

常见的介质访问控制方法有**信道划分介质控制**、**随机访问介质访问控制**和**轮询访问介质访问控制**。其中前者是静态划分信道的方法，而后两者是动态分配信道的方法。

## 1. 信道划分介质访问控制

信道划分介质访问控制将使用介质的每个设备与来自同一通信信道上的其他设备的通信隔离开来，把**时域和频域资源合理地分配给网络上的设备**。

当传输介质的带宽超过传输单个信号的带宽时，人们就通过在一条介质上同时携带多个传输信号的方法来提高传输系统的利用率，这就是所谓的多路复用，也是实现**信道划分介质范围控制**的途径。多路复用技术把多个信号组合在一条物理信道上进行传输，使**多个计算机或终端设备共享信道资源**，提高了信道的利用率。

采用多路复用技术可把多个输入通道的信息整合到一个复用信道中，在接收端把收到的信息分离出来并传送到对应的输出通道。

信道划分的实质就是通过**分时、分频、分码**等方法把原来的一条广播信道，逻辑上分为几条用于两个结点之间通信的互不干扰的字信道，实际上就是**把广播信道转变为点对点信道**。

信道划分介质访问控制分为以下 4 种。

### 1.1 频分多路复用（FDM）

**频分多路复用是一种将多路基带信号调制到不同频率在载波上，再叠加形成一个复合信号的多路复用技术**。在物理信道的可用带宽超过单个原始信号所需带宽的情况下，可将该物理信道的总带宽分割成若干与传输单个信号带宽相同（或略宽）的子信道，每个子信道传输一种信号，这就是频分多路复用。

每个子信道分配的带宽可不相同，但它们的总和必须不超过信道的总带宽。在实际应用中，为了防止子信道之间的干扰，**相邻信道之间需要加入 “保护频带”** 。

频分多路复用的优点在于充分**利用了传输介质的带宽，系统效率较高**；由于技术比较成熟，实现也较容易。

### 1.2 时分多路复用（TDM）

时分多路复用是将一条物理信道按时间分成若干时间片，轮流地分配给多个信号使用。每个时间片由复用的一个信号占用，而不像 FDM 那样，同一时间同时发送多路信号。这样，利用每个信号在时间上的交叉，就可以在一条物理信道上传输多个信号。

就某个时刻来看，时分多路复用信道上传送的仅是某一对设备之间的信号；就某段时间而言，传送的是按时间分割的多路复用信号。**但由于计算机数据的突发性，一个用户对已经分配到的子信道的利用率一般不高**。统计时分多路复用（STDM，又称异步时时分多路复用）是 TDM 的一种改进，它采用 STDM 帧，STDM 帧并不固定分配时隙，而按需动态地分配时隙，当终端有数据要传送时，才会分配到时间片，因此可以提高线路的利用率。例如，线路传输率为 8000b/s ，4 个用户的平均速率都为 2000b/s，当采用 TDM 方式时，每个用户的最高速率为 2000b/s，而在 STDM 方式下，每个用户的最高速率可达 8000b/s 。

### 1.3 波分多路复用（WDM）

波分多路复用即**光**的频分多路复用，它在一根光纤中传输多种不同波长（频率）的光信号，由于波长（频率）不同，各路光信号互不干扰，最后再用波长分解复用器将各路波长分解出来。**由于光波处于频谱的高频段，有很高的带宽，因而可以实现多路的波分复用**。

### 1.4 码分多路复用（CDM）

码分多路复用是**采用不同的编码**来区分各路原始信号的一种复用方式。与 FDM 和 TDM 不同，它既共享信道的频率，又共享时间。下面举例说明：

假设 A 站要向 C 站运输黄豆，B 站要向 C 站运输绿豆，A 与 C、B 与 C 之间有一条公共的道路，可以类比为广播信道。

在频分复用方式下，公共道路被划分为两个车道，分别提供给 A 到 C 的车和 B 到 C 的车行走，两类车可以同时行走，但只分到了公共车道的一半，因此频分复用（波分复用也一样）共享时间而不共享空间。

在时分复用方式下，先让 A 到 C 的车走一趟，再让 B 到 C 的车走一趟，两类车交替地占用公共车道。公共车道没有划分，因此两车共享了空间，但不共享时间。

码分复用与另外两种信道划分方式大为不同，在码分复用情况下，黄豆与绿豆放在同一辆车上运送，到达 C 后，由 C 站负责把车上的黄豆和绿豆分开。因此，黄豆和绿豆的运送，在码分复用的情况下，既共享了空间，也共享了时间。

码分多址（Code Division Multiple Access，CDMA）是码分复用的一种方式，其原理是每比特时间被分成 m 个更短的时间槽，称为码片（Chip），通常情况下每比特有 64 或 128 个码片。每个站点被指定一个唯一的 m 位代码或码片序列。发送 1 时，站点发送码片序列；发送 0 时，站点发送码片序列的反码。当两个或多个站点同时发送时，各路数据在信道中线性相加。为从信道中分离出各路信号，要求各个站点的码片序列相互正交。

简单理解就是，A 站向 C 站发出的信号用一个向量来表示，B 站向 C 站发出的信号用另一个向量来表示，两个向量要求相互正交。**向量中的分量，就是所谓的码片**。

下面举例说明 CDMA 的原理。

假如站点 A 的码片序列被指定为 00011011，则 A 站发送 00011011 就表示发送比特 1，发送 11100100 就表示发送比特 0 。按惯例将码片序列中的 0 写为 -1，将 1 写为 +1，A 站的码片序列就是 

`-1 -1 -1 +1 +1 -1 +1 +1`

令向量 S 表示 A 站的码片向量，令 T 表示 B 站的码片向量。两个不同站的码片序列正交，既向量 A 和 T 的规格化内积（inner product）为 0：

`S·T ≡ 1/m·Σ S_i·T_i = 0`

任何一个码片向量和该码片向量自身的规格化内积都是 1，任何一个码片向量和该码片反码的向量的规格化内积是 -1 ，如

```c++
S·S = 1/m·Σ S_i·S_i = 1/m·Σ(S_i)^2 = 1/mΣ(±1)^2=1
```

令向量 T 为 (-1 -1 +1 -1 +1 +1 +1 -1) 。

当 A 站向 C 站发送数据 1 是，就发送了向量 (-1 -1 -1 +1 +1 -1 +1 +1)

当 B 站向 C 站发送数据 0 时，就发送了向量 (+1 +1 -1 +1 -1 -1 -1 +1)

两个向量到了公共信道上就进行叠加，实际上就是线性相加（0 代表 -1），得到

`S-T=(0 0 -2 2 0 -2 0 2)`

到达 C 站后，进行数据分离。如果要得到来自 A 站的数据，那么就让 S 与 S-T 进行规格化内积，得到

`S·(S-T)=1`

所以 A 站发出的数据是 1。同理，如果要得到来自 B 站的数据，那么 

`T·(S-T)=-1` 

因此从 B 站发送过来的信号向量是一个反码向量，代表 0 。

规格化内积是线性代数的内容，实际上就是在**得到两个向量的内积后再除以向量的分量的个数**。

码分多路复用技术具有**频谱利用率高、抗干扰能力强、保密性强、语音质量好**等优点，还可以**减少投资和降低运行成本**，主要用于**无线通信系统**，特别是**移动通信系统**。

## 2. 随机访问介质访问控制

在随机访问协议中，不采用集中控制方式解决发送信息的次序问题，所有用户能根据自己的意愿随机地发送信息，占用信道全部速率。在总线形网络中，**当有两个或多个用户同时发送信息时，就会发生发生帧的冲突**（碰撞，即前面所说的互相干扰），导致所有冲突用户的发送均以失败告终。为了解决随机接入发生的碰撞，每个用户需要按照一定的规则反复地重传它的帧，直到该帧无碰撞地通过。这些规则就是随机访问介质访问控制协议，常用的协议有 ALOHA 协议、CSMA 协议、CSMA/CD 协议和 CSMA/CA 协议等，它们的核心思想都是：**胜利者通过争用获得信道，从而获得信息的发送权**。因此，随机访问介质访问控制协议又称**争用型协议**。

如果介质访问控制采用信道划分机制，那么结点之间的通信要么共享空间，要么共享时间，要么两者都共享；而如果采用随机访问控制机制，那么各结点之间的通信就可**既不共享时间，也不共享空间**。所以**随机介质访问控制实质上是一种将广播信道转化为点到点信道的行为**。

### 2.1 ALOHA 协议

夏威夷大学早期研制的随机接入系统称为 ALOHA，它是 Additive Link On-line HAwaii system 的缩写。ALOHA 协议分为纯 ALOHA 协议和时隙 ALOHA 协议两种。

1. 纯 ALOHA 协议

   纯 ALOHA 协议的基本思想是，当网络中的任何一个站点需要发送数据时，可以不进行任何检测就发送数据。如果在一段时间内未收到确认，那么该结点就认为传输过程中发生了冲突。发送站点需要等待一段时间后再发送数据直到发送成功。

   假设一条线中有 N 个帧，当站 1 发送帧 1 时，其他站都未发送数据，所以站 1 的发送必定是成功的。若站 2 和站 3 发送的帧 2 和帧 3 在**时间上重叠了一些**（即发生了碰撞）。碰撞的结果是，碰撞双方（有时也可能是多方）所发送的数据出现了差错，因而都须进行重传。但是**发生碰撞的各站并不能马上进行重传**，因为这样做必然会继续发生碰撞。纯 ALOHA 系统采用的重传策略是让各站**等待一段随机的时间**，然后再进行重传。若再次发生碰撞，则需要再等待一段随机的时间，直到重传成功为止。

   假设网络负载（T0 时间内所有站点发送成功和未成功而重传的帧数）为 G，则纯 ALOHA 网络的吞吐量（T0 时间内成功发送的平均帧数）为 `S=Ge^(-2G)` 。当 G=0.5 时，`S=0.5e^(-1)≈0.184`，这是吞吐量 S 可能达到的极大值。可见，纯 ALOHA 网络的吞吐量很低。为了克服这一缺点，人们在原始的纯 ALOHA 协议的基础上进行改进，产生了时隙 ALOHA 协议。

2. 时隙 ALOHA 协议

   时隙 ALOHA 协议把所有各站在**时间上同步起来**，并将时间划分为一段段**等长的时隙**（Slot），规定只能在每个时隙开始时才能发送一个帧。从而避免了用户发送数据的随意性，减少了数据产生冲突的可能性，提高了信道的利用率。

   时隙为 T0，**每个帧也正好在一个时隙内发送完毕**。每个帧**到达**（准备好）后，一般都要在缓存中等待一段小于 T0 的时间（时隙为 T0，所以要等待时机），然后才能发送出去。在一个时隙内有两个或两个以上的帧**到达**（准备好）时，在下一个时隙将发生碰撞。碰撞后重传的策略与 ALOHA 的情况是相似的。

   时隙 ALOHA 网络的吞吐量 S 与网络负载 G 的关系是 `S=Ge^(-G)` 。当 G=1 时，`S=e^-1≈0.368` 。这是吞吐量 S 可能达到的极大值。可见，时隙 ALOHA 网络比纯 ALOHA 网络的吞吐量大了 1 倍 。 

### 2.2 CSMA 协议

时隙 ALOHA 系统的效率虽然是纯 ALOHA 系统的两倍，但每个站点都是随心所欲地发送数据的，即使其他站点正在发送也照发不误，因此发送碰撞的概率很大。

若每个站点在发送前都先侦听一下共用信道，发现信道空闲后再发送，则就会大大降低冲突的可能，从而提高信道的利用率，**载波侦听多路访问**（Carrier Sense Multiple Access，CSMA）协议依据的正是这一思想。CSMA 协议是在 ALOHA 协议基础上提出的一种改进协议，它与 ALOHA 协议的主要区别是**多了一个载波侦听装置**。

根据侦听方式和侦听到信道忙后的处理方式不同，CSMA 协议分为三种。

1. 1-坚持 CSMA

   1-坚持 CSMA（1-persistent CSMA）的基本思想是：一个结点要发送数据时，首先侦听信道；如果信道空闲，那么立即发送数据；如果信道忙，那么等待，同时继续侦听直至信道空闲；如果发生冲突，那么随机等待一段时间后，再重新开始侦听信道。

   “1-坚持” 的含义是：侦听到信道忙后，继续坚持侦听信道；侦听到信道空闲后，发送帧的概率为 1，即立刻发送数据。

   传播时延对 1-坚持 CSMA 协议的性能影响较大。结点 A 开始发送数据后，结点 B 也正好有发送数据，结果必然导致冲突。即使不考虑延迟，1-坚持 CSMA 协议也可能发生冲突。例如，结点 A 正在发送数据时，结点 B 和 C 也准备发送数据，侦听到信道忙，于是坚持侦听，结果当结点 A 发送完毕，结点 B 和 C 就会立即发送数据，同时导致冲突。

2. 非坚持 CSMA

   非坚持 CSMA （Non-persistent CSMA）的基本思想是：一个结点要发送数据时，首先侦听信道；如果信道空闲，那么立即发送数据；如果信道忙，那么放弃侦听，等待一个随机的时间后再重复上述过程。

   非坚持 CSMA 协议再侦听到信道忙后就放弃侦听，因此降低了多个结点等待信道空闲后同时发送数据导致冲突的概率，但也会增加数据在网络中的平均延迟。可见，**信道利用率的提高是以增加数据在网络中的延迟时间为代价的**。

3. p-坚持 CSMA

   p-坚持 CSMA（P-persistent CMSA）**用于时分信道**，其基本思想是：一个结点要发送数据时，首先侦听信道；如果信道忙，那么等待下一个时隙再侦听；如果信道空闲，那么以概率 p 发送数据，以概率 1-p 推迟到下一个时隙；如果下一个时隙信道仍然空闲，那么仍以概率 p 发送数据，以概率 1-p 推迟到下一个时隙：这个过程一直持续到数据发送成功或因其他结点发送数据而检测到信道忙为止，若是后者，则等待一个随机的时间后重新开始侦听。

   p-坚持 CSMA 在检测到信道空闲后，以概率 p 发送数据，以概率 1-p 推迟到下一个时隙，其目的是降低 1-坚持 CSMA 协议中多个结点检测到信道空闲后同时发送数据的冲突概率；采用坚持 “侦听” 的目的是，试图克服非坚持 CSMA 协议中由于随机等待而造成的延迟时间较长的缺点。因此，p-坚持 CSMA 协议是非坚持 CSMA 和 1-坚持 CSMA 协议的折中方案。

| 信道状态 | 1-坚持           | 非坚持                               | p-坚持                                         |
| -------- | ---------------- | ------------------------------------ | ---------------------------------------------- |
| 空闲     | 立即发送数据     | 立即发送数据                         | 以概率 p 发送数据，以概率 1-p 推迟到下一个时隙 |
| 忙       | 继续坚持侦听信道 | 放弃侦听，等待一个随机的时间后再侦听 | 持续侦听，等待下一个时隙再侦听                 |

### 2.3 CSMA/CD 协议

载波侦听多路访问/碰撞检测（Carrier Sense Multiple Access with Collision Detection，CSMA/CD）协议是 CSMA 协议的改进方案，**适用于总线形网络或半双工网络环境**。“载波侦听” 就是**发送前先侦听**，即每个站在发送数据之前先要检测一下总线上是否有其他站点正在发送数据，若有则暂时不发送，等待信道变为空闲时再发送。“碰撞检测” 就是**边发送边侦听**，即适配器**边发送数据边检测信道上信号电压的变化情况**，以便判断自己在发送数据时其他站点是否也在发送数据。

CSMA/CD 的工作流程可简单概括为 “**先听后发，边听边发**（区别于 CSMA 协议），**冲突停发，随机重发**”。

1. 适配器从其父结点获得一个网络层数据报，准备一个以太网帧，并把该帧放到适配器缓冲区中。
2. 如果适配器侦听到信道空闲，那么它开始传输该帧。如果适配器侦听到信道忙，那么它将等待直至侦听到没有信号能量，然后开始传输该帧。
3. 在传输过程中，适配器检测来自其他适配器的信号能量。如果这个适配器传输了整个帧，而没有检测到来自其他适配器的信号能量，那么这个适配器完成该帧的传输。否则，适配器就须停止传输它的帧，取而代之传输一个 48 比特的拥塞信号。
4. 在中止（即传输拥塞信号）后，设配器采用**截断二进制指数退避算法**等待一段随机时间后返回到步骤 2 。

总线的传输时延对 CSMA/CD 的影响很大。设 τ 为单程传播时延。在 t=0 时，A 发送数据，B 检测到信道空闲。在 t=τ-δ 时，A 发送的数据还未到达 B，由于 B 检测到信道空闲而发送数据。经过时间 δ/2 后，即在 t=τ-δ/2 时，A 发送的数据和 B 发送的数据发生碰撞，但这时 A 和 B 都不知道。在 t=τ 时，B 检测到碰撞，于是停止发送数据。在 t=2τ-δ 时，A 检测到碰撞，也停止发送数据。显然，CSMA/CD 中的站点**不可能同时进行发送和接收**，因此采用 CSMA/CD 协议的以太网不可能进行全双工通信，而只能进行半双工通信。

站点在发送帧后至多经过时间 2τ 就能知道所发送的帧是否发生碰撞（δ→0 时）。因此把以太网端到端往返时间 2τ 称为**争用期**（又称冲突窗口或碰撞窗口）。每个站在自己发送数据之后的一小段时间内，存在发送冲突的可能性，只有经过争用期这段时间还未检测到冲突时，才能确定这次发送不会发送冲突。

为了确保发送站在发送数据的同时能检测到可能存在的冲突，需要**在发送完帧之前就能收到自己发送出去的数据**，即**帧的传输时延至少要两倍于信号在总线中的传播时延**，所以 CSMA/CD 总线网中**所有数据帧都必须要大于一个最小帧长**。任何站点收到帧长小于最小帧长的帧时，就把它当作无效帧立即丢弃。最小帧长的计算公式为：

最小帧长=总线传输时延×数据传输率×2

例如，以太网规定取 51.2μs 为争用期的长度。对于 10Mb/s 的以太网，在争用期内可发送 512bit ，即 64B。在以太网发送数据时，如果前 64 B 未发生冲突，那么后续数据也就不会发生冲突（表示已成功抢占信道）。换句话说，如果发生冲突，那么就一定在前 64B 。由于一旦检测到冲突就立即停止发送，因此这时发送出去的数据一定小于 64B 。因此，以太网规定最短帧长为 64B ，**凡长度小于 64B 的都是由于冲突而异常终止的无效帧**。

如果只发送小于 64B 的帧，如 40B 的帧，那么需要在 **MAC 子层**中于数据字段的后面加入一个整数字节的填充字段，以保证以太网的 MAC 帧的长度不小于 64B 。

除检测冲突外，CSMA/CD 还能从冲突中恢复。一旦发生了冲突，参与冲突的两个站点紧接着再次发送是没有意义的，如果它们这样做，那么将会导致无休止的冲突。CSMA/CD 采用**二进制指数退避算法**来解决冲突问题。算法精髓如下：

1. 确定基本退避时间，一般取两倍的总线端到端传播时延 2 τ（即**争用期**）。
2. 定义参数 k，它等于重传次数，但 k 不超过 10，即 `k=min[重传次数，10]` 。当重传次数不超过 10 时，k 等于重传次数，当重传次数大于 10 时，k 就不再增大而一直等于 10（这个条件往往容易忽略，请读者注意）
3. 从离散的整数集合 `[0,1,...,2^k-1]` 中随机取出一个数 r，重传所需要退避的时间就是 r 倍基本退避时间，即 2rτ。
4. 当重传达 16 次仍不能成功时，说明网络太拥挤，认为此帧永远无法正确发出，抛弃此帧并向高层报告出错（这个条件也容易忽略，请读者注意）。

现在来看一个例子。假如一个适配器首次试图传输一帧，当传输时，它检测到碰撞。第 1 次重传时，k=1，随机数 r 从整数 {0,1} 中选择，因此适配器可选的重传推迟时间是 0 或 2τ。若再次发送碰撞，则在第 2 次重传时，随机数 r 从整数 {0,1,2,3} 中选择，因此重传推迟时间是在 0，2τ，4τ，6τ 这 4 个时间中随机地选取一个。以此类推。

使用二进制指数退避算法可使重传需要推迟的平均时间随重传次数的增大而增大（这也称动态退避），因而能降低发生碰撞的概率，有利于整个系统的稳定。

### 2.4 CSMA/CA 协议

CSMA/CD 协议已**成功应用于使用有线连接的局域网**，但在无线局域网环境下，却不能简单地搬用 CSMA/CD 协议，特别是碰撞检测部分。主要有两个原因：

1. **接收信号的强度往往会远小于发送信号的强度**，且在无线介质上信号强度的动态变化范围很大，因此若要实现碰撞检测，则硬件上的花费就会过大。
2. 在无线通信中，**并非所有的站点都能够听到对方**，即存在 “隐蔽站” 问题。

为此，802.11 标准定义了广泛应用于无线局域网的 CSMA/CA 协议，它对 CSMA/CD 协议进行了修改，把**碰撞检测改为碰撞避免**（Collision Avoidance，CA）。“碰撞避免” 并不是指协议可以完全避免碰撞，而是指协议的设计要尽量降低碰撞发生的概率。

CSMA/CA 采用二进制指数退避算法。信道从忙态变为空闲时，任何一个站要发送数据帧时，不仅都须等待一个时间间隔，而且还要进入争用窗口，并计算随机退避时间以便再次试图接入信道，因此降低了发生碰撞的概率。当且仅当检测到**信道空闲并且这个数据帧是要发送的第一个数据帧**时，才不使用退避算法。

CSMA/CA 还使用预约信道，ACK 帧、RTS/CTS 帧等三种机制来实现碰撞避免：

1. 预约信道。发送方在发送数据的同时向其他站点通知自己传输数据需要的时间长度，以便让其他站点在这段时间内不发送数据，从而避免碰撞。
2. ACK 帧。所有站点在正确接收到发给自己的数据帧（除广播帧和组播帧）后，都需要向发送方发回一个 ACK 帧，如果接收失败，那么不采取任何行动。发送方在发送完一个数据帧后，在规定的时间内如果未收到 ACK 帧，那么认为发送失败，此时进行该数据帧的重发，**直到收到 ACK 帧或达到规定重发次数为止**。
3. RTS/CTS 帧。可选的碰撞避免机制，主要用于解决无线网的 “隐蔽站” 问题。

前两者是必须实现的，而 **RTS/CTS 帧是可选的**。但后者又增加了网络流量，所以 IEEE 802.11 无线网络在网络利用率上与类似的以太网相比，性能总是差一点。

CSMA/CD 与 CSMA/CA 主要有如下区别

1. CSMA/CD 可以检测冲突，但无法避免；**CSMA/CA 发送包的同时不能检测到信道上有无冲突**，本结点处没有冲突并不意味着在接收结点处就没有冲突，只能尽量避免。
2. 传输介质不同。CSMA/CD 用于总线形以太网，CSMA/CA 用于无线局域网 802.11a/b/g/n 等。
3. 检测方式不同。CSMA/CD 通过电缆中的电压变化来检测；而 CSMA/CA 采用**能量检测**、**载波检测**和**能量载波混合检测**三种检测信道空闲的方式。
4. 在本结点处有（无冲突），并不一定意味着在接收结点处就有（无）冲突。

总结：CSMA/CA 协议的基本思想是**在发送数据时先广播告知其他结点，让其他结点在某段时间内不要发送数据，以免出现碰撞**。CSMA/CD 协议的基本思想是**发送前侦听，边发送边侦听，一旦出现碰撞马上停止发送**。

## 3. 轮询访问介质访问控制：令牌传递协议

在轮询访问中，用户不能随机地发送消息，而是通过一个集中控制的监控站，以循环方式轮询每个结点，再决定信道的分配。当某结点使用信道时，其他结点都不能使用信道。典型的轮询访问介质访问控制协议是**令牌传递协议**，它主要用在令牌环局域网中。

在令牌传递协议中，一个令牌在各结点间以某个固定次序交换。令牌是由一组特殊的比特组合而成的帧。当环上的一个站希望传送帧时，必须等待令牌。**一旦收到令牌，站点便可启动发送帧**。帧中包括目的站的地址，以标识哪个站应接收此帧。帧在环上传送时，不管该帧是否是发给本站点的，所有站点都进行转发，直到该帧回到它的始发站，并由该始发站撤销该帧。帧的目的站除转发帧外，应针对该帧维持一个副本，并通过在帧的尾部设置 “响应比特” 来指示已收到此副本。站点在发送完一帧后，应释放令牌，以便让其他站使用。

当计算机都不需要发送数据时，令牌就在环形网上游荡，而需要发送数据的计算机只有在拿到该令牌后才能发送数据帧，因此不会发送冲突（因为令牌只有一个）。

在令牌传递网络中，**传输介质的物理拓扑不必是一个环**，但是为了把对介质访问的许可从一个设备传递到另一个设备，**令牌在设备间的传递通路逻辑上必须是一个环**。

轮询介质访问控制非常**适合负载很高的广播信道**。所谓负载很高的信道，是指多个结点在同一时刻发送数据概率很大的信道。可以想象，如果这样的广播信道采用随机介质访问控制，那么发生冲突的概率将会很大，而采用轮询介质访问控制则可以很好地满足各结点间的信道需求。

轮询介质访问控制既不共享时间、也不共享空间，它实际上是在随机介质访问控制的基础上，限定了有权力发送数据的结点只能有一个。

即使是广播信道也可通过介质访问控制机制使广播信道逻辑上变为点对点的信道，所以说**数据链路层研究的是 “点到点” 之间的通信**。

## 4. 查缺补漏

1. 带宽可等同于位速率。时分复用中介质的位速率显然高于单个信号的位速率。
2. FDM 适合于传输模拟信号，TDM 适合于传输数字信号。因为 FDM 的频分复用原理（频率就是波的性质之一）
3. CSMA 非坚持协议：一旦空闲立即发送。
4. 争用期是指两个最远端点往返传播时延。（11）
5. Hub 的发送速率等要背熟，100Base-T 集线器传输速率为 100Mb/s，以太网规定最短帧长为 64B。往返传播时延要小于最小帧传输时长。（15）
6. 令牌网不存在冲突，网上所有结点共享网络带宽
7. 码分复用时，记住不同分量要正交。
8. CSMA/CA 协议进行信道预约时，主要使用的是请求发送帧（Request to Send，RTS）和清除发送帧（Clear to Send，CTS）。一台主机想要发送信息时，先向无线站点发送一个 RTS 帧，说明要传输的数据及相应的时间。无线站点收到 RTS 帧后，会广播一个 CTS 帧作为对此的响应，既给发送端发送许可，又指示其他主机不要在这个时间内发送数据，从而预约信道，避免碰撞。

